<!-- NOTE: in the view the only variable we want to touch is `vm`-->
<h3>List Component</h3>
<button mat-raised-button color="primary"
        (click)="vm.refreshClicks.next($event)">
    Refresh List
</button>

globalList: {{globalList | async | json}}

<ng-container *ngIf="vm.configChanges | async as config">

    <div *ngIf="config.list.length; else noList">
        <mat-selection-list
                (selectionChange)="vm.selectionChangeObserver.next($event)">
            <ng-container>
                <mat-list-option *ngFor="let item of config.list"
                                 [value]="item"
                                 [selected]="(vm.selectedOptionsChanges | async)[item.id] === true">
                    {{item.name}}
                </mat-list-option>
            </ng-container>
        </mat-selection-list>
        <p>
            Options selected: {{(vm.selectedOptionsChanges | async | keyvalue).length}}
        </p>
    </div>

    <ng-template #noList>
        <mat-card>No list given!</mat-card>
    </ng-template>

</ng-container>
